# üÉè BlackJack Trainer

**ML-—Ç—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ Basic Strategy –±–ª–µ–∫–¥–∂–µ–∫–∞.**  
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –≤–∞—à —Ö–æ–¥, –≤—ã—è–≤–ª—è–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ ML, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–ø–ª–æ–≤—É—é –∫–∞—Ä—Ç—É —Å–ª–∞–±—ã—Ö –º–µ—Å—Ç.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
streamlit run app.py
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
blackjack_trainer/
‚îú‚îÄ‚îÄ app.py                     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Streamlit
‚îú‚îÄ‚îÄ requirements.txt
‚îÇ
‚îú‚îÄ‚îÄ game/
‚îÇ   ‚îú‚îÄ‚îÄ engine.py              # Card, Deck, Hand, Game
‚îÇ   ‚îú‚îÄ‚îÄ strategy.py            # Basic Strategy —Ç–∞–±–ª–∏—Ü–∞ (18√ó10)
‚îÇ   ‚îî‚îÄ‚îÄ evaluator.py
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ database.py            # SQLite connection manager
‚îÇ   ‚îú‚îÄ‚îÄ schema.py              # DDL —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü
‚îÇ   ‚îú‚îÄ‚îÄ repository.py          # CRUD + –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ game_session.py        # –§–∞—Å–∞–¥: –¥–≤–∏–∂–æ–∫ + –ë–î
‚îÇ
‚îú‚îÄ‚îÄ ml/
‚îÇ   ‚îú‚îÄ‚îÄ features.py            # Feature engineering
‚îÇ   ‚îú‚îÄ‚îÄ trainer.py             # RF + KMeans + LR
‚îÇ   ‚îú‚îÄ‚îÄ predictor.py           # Real-time –∏–Ω—Ñ–µ—Ä–µ–Ω—Å
‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.py           # –°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (cold start)
‚îÇ   ‚îî‚îÄ‚îÄ simulation.py         # Monte-Carlo —Å–∏–º—É–ª—è—Ç–æ—Ä
‚îÇ
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ styles.py              # CSS —Ç–µ–º–∞ + HTML helpers
‚îÇ   ‚îú‚îÄ‚îÄ game_view.py           # –ò–≥—Ä–æ–≤–æ–π —Å—Ç–æ–ª
‚îÇ   ‚îú‚îÄ‚îÄ analytics_view.py      # –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ simulation_view.py     # Monte-Carlo —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ test_game.py           # 84 —Ç–µ—Å—Ç–∞ –¥–≤–∏–∂–∫–∞ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
    ‚îú‚îÄ‚îÄ test_data.py           # 64 —Ç–µ—Å—Ç–∞ –ë–î —Å–ª–æ—è
    ‚îú‚îÄ‚îÄ test_ui.py             # 35 —Ç–µ—Å—Ç–æ–≤ UI –∏ —Å–∏–º—É–ª—è—Ü–∏–∏
    ‚îî‚îÄ‚îÄ test_ml.py             # 46 —Ç–µ—Å—Ç–æ–≤ ML –ø–∞–π–ø–ª–∞–π–Ω–∞
```

---

## –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### üéÆ –ò–≥—Ä–∞
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±–ª–µ–∫–¥–∂–µ–∫ —Å 6-–∫–æ–ª–æ–¥–Ω—ã–º –±–∞—à–º–∞–∫–æ–º
- –§–∏–¥–±–µ–∫ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ö–æ–¥–∞: –≤–µ—Ä–Ω–æ / –æ—à–∏–±–∫–∞ + —á—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ —Å–¥–µ–ª–∞—Ç—å
- ML-–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ –≤—ã —á–∞—Å—Ç–æ –æ—à–∏–±–∞–µ—Ç–µ—Å—å –≤ –¥–∞–Ω–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏

### üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- **–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –æ—à–∏–±–æ–∫** ‚Äî —Å–µ—Ç–∫–∞ 18√ó10, –∫–∞–∫–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ
- **–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** ‚Äî —Ç–æ—á–Ω–æ—Å—Ç—å –∏ win rate –ø–æ —Å–µ—Å—Å–∏—è–º
- **–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞** ‚Äî ML-–∫–ª–∞—Å—Ç–µ—Ä (–≠–∫—Å–ø–µ—Ä—Ç / –û—Å—Ç–æ—Ä–æ–∂–Ω—ã–π / –ò–º–ø—É–ª—å—Å–∏–≤–Ω—ã–π / –•–∞–æ—Ç–∏–∫)

### üî¨ –°–∏–º—É–ª—è—Ü–∏—è
- Monte-Carlo: 1k‚Äì25k —Ä–∞—É–Ω–¥–æ–≤
- –¢—Ä–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: Basic Strategy, –ù–æ–≤–∏—á–æ–∫, –°–ª—É—á–∞–π–Ω–∞—è
- EV-–∞–Ω–∞–ª–∏–∑ –∏ –¥–∏–Ω–∞–º–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∞

---

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
python -m unittest discover -s tests -v
# –û–∂–∏–¥–∞–µ—Ç—Å—è: Ran 229 tests ... OK
```

---

## ML –ø–∞–π–ø–ª–∞–π–Ω

| –ú–æ–¥–µ–ª—å | –ó–∞–¥–∞—á–∞ | –í—Ö–æ–¥–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|--------|--------|-----------------|-----------|
| Random Forest | P(–æ—à–∏–±–∫–∞) | player_total, dealer_upcard, is_soft, is_pair, action | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ UI |
| KMeans (k=4) | –ö–ª–∞—Å—Ç–µ—Ä —Å—Ç–∏–ª—è | hit_rate, stand_rate, double_rate, soft_accuracy | –ê—Ä—Ö–µ—Ç–∏–ø –∏–≥—Ä–æ–∫–∞ |
| Logistic Reg | –¢–æ—á–Ω–æ—Å—Ç—å –ø–æ —Å–∏—Ç—É–∞—Ü–∏–∏ | –¢–µ –∂–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ | –¢–æ–ø –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–µ—Å—Ç |

**Cold start**: –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è 200 —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Ö–æ–¥–æ–≤  
(–∏–º–∏—Ç–∞—Ü–∏—è –Ω–æ–≤–∏—á–∫–∞) –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π.

**–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 25 –Ω–æ–≤—ã—Ö —Ö–æ–¥–æ–≤.

---

## –ü—Ä–∞–≤–∏–ª–∞ Basic Strategy (6 –∫–æ–ª–æ–¥, –¥–∏–ª–µ—Ä —Å—Ç–æ–∏—Ç –Ω–∞ Soft 17)

- **Hard 17+** ‚Üí –≤—Å–µ–≥–¥–∞ Stand
- **Hard 11** ‚Üí Double vs 2‚Äì10, Hit vs –¢—É–∑  
- **Hard 12** ‚Üí Stand vs 4‚Äì6, Hit vs –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
- **8-8, A-A** ‚Üí –≤—Å–µ–≥–¥–∞ Split
- **10-10** ‚Üí –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ Split
- **Soft 18** ‚Üí Double vs 3‚Äì6, Stand vs 7‚Äì8, Hit vs 9‚ÄìA
